<div *ngIf="isDebug">
  <h3>Debug only!</h3>
  <p>Bomb counter: {{ board.mineCount }}</p>
  <p>Remaining cells: {{ board.remainingCells }}</p>
  <div style="display: inline flex; column-gap: 30px">
    <div *ngFor="let number of numbers">
      <span [ngClass]="'number-' + number">{{ number }}</span>
    </div>
  </div>
  <br />
  <div style="display: inline flex; column-gap: 30px">
    <div *ngFor="let special of specialChars">
      <span style="color: black">{{ special }}</span>
    </div>
  </div>
</div>

<p-button (click)="showDialog()" label="Show" />
<p-dialog header="Edit Profile" [modal]="true" [(visible)]="visible" [style]="{ width: '25rem' }">
    <span class="p-text-secondary block mb-8">Update your information.</span>
    <div class="flex items-center gap-4 mb-4">
        <label for="username" class="font-semibold w-24">Username?</label>
        <input pInputText id="username" class="flex-auto" autocomplete="off" />
    </div>
    <div class="flex items-center gap-4 mb-8">
        <label for="email" class="font-semibold w-24">Email</label>
        <input pInputText id="email" class="flex-auto" autocomplete="off" />
    </div>
    <div class="flex justify-end gap-2">
        <p-button label="Cancel" severity="secondary" (click)="visible = false" />
        <p-button label="Save" (click)="visible = false" />
    </div>
</p-dialog>

<div class="wrapper">
  <!-- <app-game-over 
    *ngIf="board.result !== null"
    [result]="board.result === 'win' ? 'You won!' : board.result === 'gameover' ? 'You lost!' : ''"
    (rematch)="reset()">
  </app-game-over> -->

  <!-- <app-game-start>

  </app-game-start> -->

  <h1>Minesweeper</h1>

  <!-- TODO Pass this to a component! Use flex-box space-between! -->
  <div class="header">
    <div class="cell-content">
      <span 
        style="background-color: yellow;"
        (click)="checkGameState(board.result)"
      >{{ gameStateIcon }}</span>
    </div>
    <div class="cell-content">
      <p>Timer WIP!</p>
    </div>
  </div>
  <br>

  <table [style.--rows]="board.cells.length" [style.--cols]="board.cells[0].length">
    <tr *ngFor="let row of board.cells">
      <td 
        *ngFor="let cell of row"
        [style.background-color]="(cell.status === 'open' || cell.status === 'flag') ? 'lightgray' : 'rgb(192, 192, 192)'"
        (click)="checkCell(cell)"
        (contextmenu)="$event.preventDefault(); flag(cell)"
      >
        <!-- single wrapper for flex centering -->
        <div class="cell-content"
            [ngClass]="cell.status !== 'flag' && !cell.mine ? 'number-' + cell.proximityMines : ''">
          
          <!-- Use inline elements only -->
          <span *ngIf="cell.status === 'clear' && !cell.mine && cell.proximityMines > 0">
            {{ cell.proximityMines }}
          </span>

          <span class="flag" *ngIf="cell.status === 'flag'">`</span>
          <span *ngIf="cell.mine && cell.status === 'clear'">*</span>
        </div>
      </td>
    </tr>
  </table>
</div>
